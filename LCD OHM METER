/*
  Simple Ohm Meter with Custom Ω Symbol
  -------------------------------------
  - Measures resistance using a voltage divider
  - Displays the result on a 16x2 LCD
  - Includes a custom Ω character

  Wiring:
  LCD RS  → 12
  LCD E   → 11
  LCD D4  → 5
  LCD D5  → 4
  LCD D6  → 3
  LCD D7  → 2
  LCD RW  → GND
  LCD VSS → GND
  LCD VCC → +5V
  Potentiometer (10K) → LCD VO (contrast)
  Voltage divider on A0 with known resistor (10KΩ)
*/

#include <LiquidCrystal.h>

// LCD pins
const int rs = 12, en = 11, d4 = 5, d5 = 4, d6 = 3, d7 = 2;
LiquidCrystal lcd(rs, en, d4, d5, d6, d7);

// Custom Ω symbol
byte omega[8] = {
  0b00000,
  0b01110,
  0b10001,
  0b10001,
  0b10001,
  0b01010,
  0b11011,
  0b00000
};

// Known resistor value in ohms (10kΩ)
const float R_known = 10000.0;

void setup() {
  lcd.begin(16, 2);
  lcd.createChar(0, omega);
  lcd.clear();
  lcd.print("Ohm Meter Ready");
  delay(1500);
  lcd.clear();
}

void loop() {
  int sensorValue = analogRead(A0);
  float Vout = sensorValue * (5.0 / 1023.0);
  float I = (5.0 - Vout) / R_known;
  float R_unknown = Vout / I;

  lcd.setCursor(0, 0);
  lcd.print("Resistance:");
  lcd.setCursor(0, 1);
  lcd.print(R_unknown, 2);   // Show 2 decimal places
  lcd.write(byte(0));        // Ω symbol
  lcd.print("       ");      // Clear leftover chars if shorter value

  delay(500);  // small delay for stable refresh
}
